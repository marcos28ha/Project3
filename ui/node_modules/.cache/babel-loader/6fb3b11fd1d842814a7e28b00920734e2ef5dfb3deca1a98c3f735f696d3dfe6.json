{"ast":null,"code":"import _slicedToArray from\"C:/Users/LENOVO/Desktop/Universidad/Aalto/Designing and Building Scalable Web Applications/Project 3/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import logo from'./logo.svg';import'./App.css';import{useEffect,useState}from'react';import messageService from'./modules/messageService';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),activeMessage=_useState4[0],setActiveMessage=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newMessage=_useState6[0],setNewMessage=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newResponse=_useState8[0],setNewResponse=_useState8[1];var selectMessage=function selectMessage(message){setActiveMessage(message);};var handleMessageChange=function handleMessageChange(event){setNewMessage(event.target.value);};var handleResponseChange=function handleResponseChange(event){setNewResponse(event.target.value);};var postMessage=function postMessage(event){event.preventDefault();var createMessage={id:Math.floor(Math.random()*10000),text:newMessage,date:Math.floor(Math.random()*10000),responses:[]};messageService.createMessage(createMessage).then(function(response){setNewMessage(\"\");setMessages(messages.concat(createMessage));});};var postResponse=function postResponse(event){event.preventDefault();var id=activeMessage.id;var response={id:Math.floor(Math.random()*10000),text:newResponse,date:Math.floor(Math.random()*10000)};var message=messages.find(function(m){return m.id===id;});message.responses=message.responses.concat(response);messageService.addResponse(message.id,response).then(function(result){setMessages(messages.map(function(m){return m.id===message.id?message:m;}));setNewResponse(\"\");});};useEffect(function(){messageService.getAll().then(function(initialMessages){setMessages(initialMessages);});},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Message application\"}),/*#__PURE__*/_jsx(MessageList,{messages:messages,selectMessage:selectMessage,newMessage:newMessage,handleMessageChange:handleMessageChange,postMessage:postMessage}),/*#__PURE__*/_jsx(MessageResponses,{activeMessage:activeMessage,newResponse:newResponse,handleResponseChange:handleResponseChange,postResponse:postResponse})]});};var MessageList=function MessageList(_ref){var messages=_ref.messages,selectMessage=_ref.selectMessage,handleMessageChange=_ref.handleMessageChange,newMessage=_ref.newMessage,postMessage=_ref.postMessage;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"ul\",{children:messages.map(function(message){return/*#__PURE__*/_jsx(Message,{message:message,selectMessage:selectMessage},message.id);})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:postMessage,children:[/*#__PURE__*/_jsx(\"input\",{value:newMessage,onChange:handleMessageChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Post Message!\"})]})]});};var Message=function Message(_ref2){var message=_ref2.message,selectMessage=_ref2.selectMessage;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return selectMessage(message);},children:message.text})});};var MessageResponses=function MessageResponses(_ref3){var activeMessage=_ref3.activeMessage,postResponse=_ref3.postResponse,newResponse=_ref3.newResponse,handleResponseChange=_ref3.handleResponseChange;if(activeMessage){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:activeMessage.text}),activeMessage.responses?/*#__PURE__*/_jsx(\"ul\",{children:activeMessage.responses.map(function(response){return/*#__PURE__*/_jsx(Message,{message:response,selectMessage:function selectMessage(){}},response.id);})}):null,/*#__PURE__*/_jsxs(\"form\",{onSubmit:postResponse,children:[/*#__PURE__*/_jsx(\"input\",{value:newResponse,onChange:handleResponseChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Post Response\"})]})]});}};export default App;","map":{"version":3,"names":["logo","useEffect","useState","messageService","App","messages","setMessages","activeMessage","setActiveMessage","newMessage","setNewMessage","newResponse","setNewResponse","selectMessage","message","handleMessageChange","event","target","value","handleResponseChange","postMessage","preventDefault","createMessage","id","Math","floor","random","text","date","responses","then","response","concat","postResponse","find","m","addResponse","result","map","getAll","initialMessages","MessageList","Message","MessageResponses"],"sources":["C:/Users/LENOVO/Desktop/Universidad/Aalto/Designing and Building Scalable Web Applications/Project 3/ui/src/App.js"],"sourcesContent":["import logo from './logo.svg';\nimport './App.css';\nimport { useEffect, useState } from 'react'\nimport messageService from './modules/messageService'\n\nconst App = () => {\n\n  \n  const [messages, setMessages] = useState([])\n  const [activeMessage, setActiveMessage] = useState(null)\n  const [newMessage, setNewMessage] = useState('')\n  const [newResponse, setNewResponse] = useState('')\n\n\n  const selectMessage = (message) => {\n    setActiveMessage(message)\n  }\n\n  const handleMessageChange = (event) => {\n    setNewMessage(event.target.value)\n  }\n\n  const handleResponseChange = (event) => {\n    setNewResponse(event.target.value)\n  }\n\n  const postMessage = (event) => {\n    event.preventDefault()\n    let createMessage = {\n      id: Math.floor(Math.random()*10000),\n      text: newMessage,\n      date:  Math.floor(Math.random()*10000),\n      responses: []   \n    }\n    messageService\n      .createMessage(createMessage)\n      .then(response => {\n        setNewMessage(\"\")\n        setMessages(messages.concat(createMessage))\n      })\n  }\n\n  const postResponse = (event) => {\n    event.preventDefault()\n    let id = activeMessage.id\n    let response = {\n      id: Math.floor(Math.random()*10000),\n      text: newResponse,\n      date:  Math.floor(Math.random()*10000)   \n    }\n    let message = messages.find(m => m.id === id)\n    message.responses = message.responses.concat(response)\n    messageService\n      .addResponse(message.id, response)\n      .then(result => {\n        setMessages(messages.map(m => m.id === message.id ? message : m))\n        setNewResponse(\"\")\n      }\n      )\n    \n  }\n\n  useEffect(() => {\n    messageService\n      .getAll()\n      .then(initialMessages => { setMessages(initialMessages)\n      })\n    }, [])\n\n  return (\n    <div>\n      <h1>Message application</h1>\n      <MessageList messages={messages} selectMessage={selectMessage} newMessage={newMessage} handleMessageChange={handleMessageChange} postMessage={postMessage}/>\n      <MessageResponses activeMessage={activeMessage} newResponse={newResponse} handleResponseChange={handleResponseChange} postResponse={postResponse}/>\n      </div>\n  );\n}\n\nconst MessageList = ({messages, selectMessage, handleMessageChange, newMessage, postMessage}) => {\n\n  return( \n    <div>\n      <ul>\n        {messages.map(message => \n          <Message key={message.id} message={message} selectMessage={selectMessage}/>\n        )}\n      </ul>\n\n      <form onSubmit={postMessage}>\n        <input\n          value={newMessage}\n          onChange={handleMessageChange}\n        />\n        <button type=\"submit\">Post Message!</button>\n      </form>\n    </div>\n  )\n}\n\nconst Message = ({message, selectMessage}) => {\n\n  return(\n    <div>\n      <li onClick={() => selectMessage(message)}>{message.text}</li>\n    </div>\n  )\n  \n}\n\nconst MessageResponses = ({activeMessage, postResponse, newResponse, handleResponseChange}) => {\n  if(activeMessage){\n    return(\n      <div>\n        <h3>{activeMessage.text}</h3>\n        {activeMessage.responses ?\n          <ul>\n          {activeMessage.responses.map(response => \n            <Message key={response.id} message={response} selectMessage={() => {}}/>\n          )}\n          </ul>\n         :null}     \n           \n\n        <form onSubmit={postResponse}>\n        <input\n          value={newResponse}\n          onChange={handleResponseChange}\n        />\n        <button type=\"submit\">Post Response</button>\n      </form>\n      </div>\n    )\n  }\n}\n\nexport default App;\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}