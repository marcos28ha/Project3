{"ast":null,"code":"import _slicedToArray from\"C:/Users/LENOVO/Desktop/Universidad/Aalto/Designing and Building Scalable Web Applications/Project 3/Project3/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import logo from'./logo.svg';import'./App.css';import{useEffect,useState}from'react';import messageService from'./modules/messageService';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),activeMessage=_useState4[0],setActiveMessage=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newMessage=_useState6[0],setNewMessage=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newResponse=_useState8[0],setNewResponse=_useState8[1];var selectMessage=function selectMessage(message){setActiveMessage(message);console.log(message);};var handleMessageChange=function handleMessageChange(event){setNewMessage(event.target.value);};var handleResponseChange=function handleResponseChange(event){setNewResponse(event.target.value);};var postMessage=function postMessage(event){event.preventDefault();var createMessage={id:Math.floor(Math.random()*10000),content:newMessage,date:Math.floor(Math.random()*10000),responses:[]};messageService.createMessage(createMessage).then(function(response){setNewMessage(\"\");setMessages(messages.concat(createMessage));});};var postResponse=function postResponse(event){event.preventDefault();var id=activeMessage.id;var response={id:Math.floor(Math.random()*10000),content:newResponse,date:Math.floor(Math.random()*10000)};var message=messages.find(function(m){return m.id===id;});message.responses=message.responses.concat(response);messageService.addResponse(message.id,response).then(function(result){setMessages(messages.map(function(m){return m.id===message.id?message:m;}));setNewResponse(\"\");});};useEffect(function(){messageService.getAll().then(function(initialMessages){setMessages(initialMessages);console.log(messages);});},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Message application\"}),/*#__PURE__*/_jsx(MessageList,{messages:messages,selectMessage:selectMessage,newMessage:newMessage,handleMessageChange:handleMessageChange,postMessage:postMessage}),/*#__PURE__*/_jsx(MessageResponses,{activeMessage:activeMessage,newResponse:newResponse,handleResponseChange:handleResponseChange,postResponse:postResponse})]});};var MessageList=function MessageList(_ref){var messages=_ref.messages,selectMessage=_ref.selectMessage,handleMessageChange=_ref.handleMessageChange,newMessage=_ref.newMessage,postMessage=_ref.postMessage;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"ul\",{children:messages.map(function(message){return/*#__PURE__*/_jsx(Message,{message:message,selectMessage:selectMessage},message.id);})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:postMessage,children:[/*#__PURE__*/_jsx(\"input\",{value:newMessage,onChange:handleMessageChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Post Message!\"})]})]});};var Message=function Message(_ref2){var message=_ref2.message,selectMessage=_ref2.selectMessage;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return selectMessage(message);},children:message.content})});};var MessageResponses=function MessageResponses(_ref3){var activeMessage=_ref3.activeMessage,postResponse=_ref3.postResponse,newResponse=_ref3.newResponse,handleResponseChange=_ref3.handleResponseChange;if(activeMessage){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:activeMessage.content}),activeMessage.responses?/*#__PURE__*/_jsx(\"ul\",{children:activeMessage.responses.map(function(response){return/*#__PURE__*/_jsx(Message,{message:response,selectMessage:function selectMessage(){}},response.id);})}):null,/*#__PURE__*/_jsxs(\"form\",{onSubmit:postResponse,children:[/*#__PURE__*/_jsx(\"input\",{value:newResponse,onChange:handleResponseChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Post Response\"})]})]});}};export default App;","map":{"version":3,"names":["logo","useEffect","useState","messageService","App","messages","setMessages","activeMessage","setActiveMessage","newMessage","setNewMessage","newResponse","setNewResponse","selectMessage","message","console","log","handleMessageChange","event","target","value","handleResponseChange","postMessage","preventDefault","createMessage","id","Math","floor","random","content","date","responses","then","response","concat","postResponse","find","m","addResponse","result","map","getAll","initialMessages","MessageList","Message","MessageResponses"],"sources":["C:/Users/LENOVO/Desktop/Universidad/Aalto/Designing and Building Scalable Web Applications/Project 3/Project3/ui/src/App.js"],"sourcesContent":["import logo from './logo.svg';\r\nimport './App.css';\r\nimport { useEffect, useState } from 'react'\r\nimport messageService from './modules/messageService'\r\n\r\nconst App = () => {\r\n\r\n  \r\n  const [messages, setMessages] = useState([])\r\n  const [activeMessage, setActiveMessage] = useState(null)\r\n  const [newMessage, setNewMessage] = useState('')\r\n  const [newResponse, setNewResponse] = useState('')\r\n\r\n\r\n  const selectMessage = (message) => {\r\n    setActiveMessage(message)\r\n    console.log(message)\r\n  }\r\n\r\n  const handleMessageChange = (event) => {\r\n    setNewMessage(event.target.value)\r\n  }\r\n\r\n  const handleResponseChange = (event) => {\r\n    setNewResponse(event.target.value)\r\n  }\r\n\r\n  const postMessage = (event) => {\r\n    event.preventDefault()\r\n    let createMessage = {\r\n      id: Math.floor(Math.random()*10000),\r\n      content: newMessage,\r\n      date:  Math.floor(Math.random()*10000),\r\n      responses: []   \r\n    }\r\n    messageService\r\n      .createMessage(createMessage)\r\n      .then(response => {\r\n        setNewMessage(\"\")\r\n        setMessages(messages.concat(createMessage))\r\n      })\r\n  }\r\n\r\n  const postResponse = (event) => {\r\n    event.preventDefault()\r\n    let id = activeMessage.id\r\n    let response = {\r\n      id: Math.floor(Math.random()*10000),\r\n      content: newResponse,\r\n      date:  Math.floor(Math.random()*10000)   \r\n    }\r\n    let message = messages.find(m => m.id === id)\r\n    message.responses = message.responses.concat(response)\r\n    messageService\r\n      .addResponse(message.id, response)\r\n      .then(result => {\r\n        setMessages(messages.map(m => m.id === message.id ? message : m))\r\n        setNewResponse(\"\")\r\n      }\r\n      )\r\n    \r\n  }\r\n\r\n  useEffect(() => {\r\n    messageService\r\n      .getAll()\r\n      .then(initialMessages => { \r\n        setMessages(initialMessages)\r\n        console.log(messages)\r\n      })\r\n    }, [])\r\n\r\n  return (\r\n    <div>\r\n      <h1>Message application</h1>\r\n      <MessageList messages={messages} selectMessage={selectMessage} newMessage={newMessage} handleMessageChange={handleMessageChange} postMessage={postMessage}/>\r\n      <MessageResponses activeMessage={activeMessage} newResponse={newResponse} handleResponseChange={handleResponseChange} postResponse={postResponse}/>\r\n      </div>\r\n  );\r\n}\r\n\r\nconst MessageList = ({messages, selectMessage, handleMessageChange, newMessage, postMessage}) => {\r\n\r\n  return( \r\n    <div>\r\n      <ul>\r\n        {messages.map(message => \r\n          <Message key={message.id} message={message} selectMessage={selectMessage}/>\r\n        )}\r\n      </ul>\r\n\r\n      <form onSubmit={postMessage}>\r\n        <input\r\n          value={newMessage}\r\n          onChange={handleMessageChange}\r\n        />\r\n        <button type=\"submit\">Post Message!</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Message = ({message, selectMessage}) => {\r\n\r\n  return(\r\n    <div>\r\n      <li onClick={() => selectMessage(message)}>{message.content}</li>\r\n    </div>\r\n  )\r\n  \r\n}\r\n\r\nconst MessageResponses = ({activeMessage, postResponse, newResponse, handleResponseChange}) => {\r\n  if(activeMessage){\r\n    return(\r\n      <div>\r\n        <h3>{activeMessage.content}</h3>\r\n        {activeMessage.responses ?\r\n          <ul>\r\n          {activeMessage.responses.map(response => \r\n            <Message key={response.id} message={response} selectMessage={() => {}}/>\r\n          )}\r\n          </ul>\r\n         :null}     \r\n           \r\n\r\n        <form onSubmit={postResponse}>\r\n        <input\r\n          value={newResponse}\r\n          onChange={handleResponseChange}\r\n        />\r\n        <button type=\"submit\">Post Response</button>\r\n      </form>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App;\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}